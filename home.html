<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/home.css">
    <title>A.R.G.B Color Picker</title>
</head>
<body style="font-family: Arial;">
    <input id="colorInput" type="text" placeholder="Color" style="width: 30%; height: 2%; margin-top: 3%; margin-left: 2%;"/>
    <button onclick="changeColor()">Change Text Color</button>
    <table style="margin-top: 5%; margin-left: 2%">
        <tr>
            <th>Transparency</th>
            <th>75% brighter</th>
            <th>50% brighter</th>
            <th>25% brighter</th>
            <th>Original</th>
            <th>25% darker</th>
            <th>50% darker</th>
            <th>75% darker</th>
        </tr>

        <tr id="transparentRow0">
            <td>0</td>
            <td id="g75t0"></td>
            <td id="g50t0"></td>
            <td id="g25t0"></td>
            <td id="g0t0"></td>
            <td id="t25t0"></td>
            <td id="t50t0"></td>
            <td id="t75t0"></td>
        </tr>

        <tr id="transparentRow75">
            <td>25</td>
            <td id="g75t75"></td>
            <td id="g50t75"></td>
            <td id="g25t75"></td>
            <td id="g0t75"></td>
            <td id="t25t75"></td>
            <td id="t50t75"></td>
            <td id="t75t75"></td>
        </tr>

        <tr id="transparentRow50">
            <td>50</td>
            <td id="g75t50"></td>
            <td id="g50t50"></td>
            <td id="g25t50"></td>
            <td id="g0t50"></td>
            <td id="t25t50"></td>
            <td id="t50t50"></td>
            <td id="t75t50"></td>
        </tr>

        <tr id="transparentRow25">
            <td>75</td>
            <td id="g75t25"></td>
            <td id="g50t25"></td>
            <td id="g25t25"></td>
            <td id="g0t25"></td>
            <td id="t25t25"></td>
            <td id="t50t25"></td>
            <td id="t75t25"></td>
        </tr>
    </table>

    <script>
        function changeColor() {
            var input = document.getElementById("colorInput");
            let enteredColor = input.value;
            var element = document.getElementById("g0t0");
            element.style.backgroundColor = enteredColor;

            var color = tintRgbColor(enteredColor, 25);
            var element = document.getElementById("g25t0");
            console.debug("color is: " + color);
            element.style.backgroundColor = color;

            var color = tintRgbColor(enteredColor, 50);
            var element = document.getElementById("g50t0");
            console.debug("color is: " + color);
            element.style.backgroundColor = color;

            var color = tintRgbColor(enteredColor, 75);
            var element = document.getElementById("g75t0");
            console.debug("color is: " + color);
            element.style.backgroundColor = color;

            var color = tintRgbColor(enteredColor, -25);
            var element = document.getElementById("t25t0");
            console.debug("color is: " + color);
            element.style.backgroundColor = color;

            var color = tintRgbColor(enteredColor, -50);
            var element = document.getElementById("t50t0");
            console.debug("color is: " + color);
            element.style.backgroundColor = color;

            var color = tintRgbColor(enteredColor, -75);
            var element = document.getElementById("t75t0");
            console.debug("color is: " + color);
            element.style.backgroundColor = color;
        }

        function tintRgbColor(rgbColor, tintPercentage) {
            if (!/^#[0-9A-F]{6}$/i.test(rgbColor)) {
                console.error("Invalid ARGB color format.");
                return;
            }

            rgbColor = rgbColor.replace("#", "");
            // Convert the ARGB color to an array of integers
            let wibble = rgbColor.match(/.{1,2}/g);
            const argbArray = wibble.map(hex => parseInt(hex, 16));
            // Calculate the amount of white to add based on the tint percentage
            var  whiteToAdd = Math.round((255 * tintPercentage) / 100);
            // Add the calculated white to the red, green, and blue components
            argbArray[0] += whiteToAdd; // Red
            argbArray[1] += whiteToAdd; // Green
            argbArray[2] += whiteToAdd; // Blue
            // Ensure the color components stay within the 0-255 range
            for (var i = 0; i < argbArray.length; i++)
            {
                var value = argbArray[i];
                if (value > 255) argbArray[i] = 255;
                else if (value < 0) argbArray[i] = 0;
            }
            
            // Convert the modified components back to a hex string
            const floob = "rgb(";
            var tintedHex = floob.concat(argbArray[0], ", ", argbArray[1], ", ", argbArray[2], ")")         
            return tintedHex;
        }
    </script>
</body>
</html>